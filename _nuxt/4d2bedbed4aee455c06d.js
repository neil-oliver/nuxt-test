(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{339:function(t,e,n){"use strict";n.r(e);n(40),n(16),n(41);var r=n(5),o=n(284),c=n(291),l=n.n(c),f=n(300),m=n(301),d=n(302),w=n(303),h=n(304);function _(t){return t.created_at=new Date(t.created_at),t.reply_count=1,t.quote_count=1,t.interaction_count=t.quote_count+t.retweet_count+t.reply_count+t.favorite_count,t}Date.prototype.addHours=function(t){return this.setTime(this.getTime()+60*t*60*1e3),this},Date.prototype.addMinutes=function(t){return this.setTime(this.getTime()+60*t*1e3),this},e.default={components:{"vis-1":f.a,correlation:m.a,"vis-2":d.a,"vis-3":w.a,"twitter-tooltip":h.a},data:function(){return{allTweets:[],candles:[],followers_count:0,retweet_count:0,reply_count:0,favorite_count:0,sentiment_min:0,verified:!1,timePeriod:"minute",startPeriod:0,endPeriod:.5,grid:!0,tooltipVisible:!1,selectedTweet:"6"}},created:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.a.get("./data/dynamodb-download.json");case 2:n=e.sent,n.data.sort((function(a,b){return new Date(b.timestamp.S)-new Date(a.timestamp.S)})).forEach((function(e){"candle"==e.type.S?(e.content=JSON.parse(e.content.S),e.content.timestampMs=new Date(e.content.timestampMs),t.candles.push(e.content)):new Date(e.timestamp.S)>new Date("2020-03-29T05:36:44.000Z")&&t.allTweets.push(_(JSON.parse(e.content.S)))}));case 5:case"end":return e.stop()}}),e)})))()},computed:{tweets:function(){var t=this;return this.allTweets.filter((function(e){return e.created_at>=t.startDate&&e.created_at<=t.endDate}))},width:function(){return this.svgWidth-this.margin.left-this.margin.right},height:function(){return this.svgHeight-this.margin.top-this.margin.bottom},startDate:function(){return new Date("2020-03-29T05:36:44.000Z")},endDate:function(){return new Date("2020-03-29T07:36:44.000Z").addHours(this.endPeriod)},filteredTweets:function(){var t=this;return this.tweets.filter((function(e){return e.user.followers_count>=t.followers_count&&Math.abs(e.sentiment)>=t.sentiment_min&&e.retweet_count>=t.retweet_count&&e.reply_count>=t.reply_count&&e.favorite_count>=t.favorite_count&&(!t.verified||t.verified==e.user.verified)}))},filteredCandles:function(){var t=this;return this.candles.filter((function(e){return e.timestampMs>=t.startDate&&e.timestampMs<=t.endDate}))},aggregateTweets:function(){var t=this;return o.nest().key((function(e){return t.filterTime(e.created_at)})).rollup((function(t){return{count:t.length,followerMax:o.max(t,(function(t){return t.user.followers_count})),retweetMax:o.max(t,(function(t){return t.retweet_count})),likeMax:o.max(t,(function(t){return t.favorite_count})),sentimentAvg:o.mean(t,(function(t){return t.sentiment})),sentimentLikeAvg:o.sum(t,(function(e){return e.sentiment*e.favorite_count/o.sum(t,(function(t){return t.favorite_count}))})),sentimentFollowerAvg:o.sum(t,(function(e){return e.sentiment*e.user.followers_count/o.sum(t,(function(t){return t.user.followers_count}))})),sentimentCommentAvg:o.sum(t,(function(e){return e.sentiment*e.reply_count/o.sum(t,(function(t){return t.reply_count}))})),sentimentRetweetAvg:o.sum(t,(function(e){return e.sentiment*e.retweet_count/o.sum(t,(function(t){return t.retweet_count}))})),sentimentInteractionAvg:o.sum(t,(function(e){return e.sentiment*e.interaction_count/o.sum(t,(function(t){return t.interaction_count}))}))}})).entries(this.filteredTweets)},aggregateCandles:function(){var t=this;return o.nest().key((function(e){return t.filterTime(e.timestampMs)})).rollup((function(t){return{count:t.length,closeAvg:o.mean(t,(function(t){return t.close}))}})).entries(this.filteredCandles)},maxComments:function(){return o.max(this.filteredTweets,(function(t){return t.reply_count}))},maxLikes:function(){return o.max(this.filteredTweets,(function(t){return t.favourite_count}))},maxRetweets:function(){return o.max(this.filteredTweets,(function(t){return t.retweet_count}))},maxFollowers:function(){return o.max(this.filteredTweets,(function(t){return t.user.followers_count}))}},methods:{filterTime:function(t){return"minute"==this.timePeriod?(t.setSeconds(0),t.setMilliseconds(0)):(t.setMinutes(0),t.setSeconds(0),t.setMilliseconds(0)),t},processMouseover:function(t){1==t.visible?(this.tooltipVisible=!0,this.selectedTweet=t.id):this.tooltipVisible=!1;o.select("#tooltip").style("left",event.clientX+"px").style("top",event.clientY+"px")}},directives:{axis:function(t,e){var n=e.arg,r={x:"axisBottom",y:"axisLeft"}[n],c=e.value[n],l=o.transition().duration(500).ease(o.easeLinear);o.select(t).transition(l).call(o[r](c))}}}}}]);