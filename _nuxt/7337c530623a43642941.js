(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{346:function(t,e,n){"use strict";n.r(e);n(40);var r=n(5),o=n(284),c=n(296),d=n.n(c),f=n(306),l=n(293),h=n(307),m=n(308),w=n(309),v=n(294),D=n(285),_=n.n(D);function T(t){return t.created_at=new Date(t.created_at),t.reply_count=1,t.quote_count=1,t.interaction_count=t.quote_count+t.retweet_count+t.reply_count+t.favorite_count,t}Date.prototype.addHours=function(t){return this.setTime(this.getTime()+60*t*60*1e3),this},Date.prototype.addMinutes=function(t){return this.setTime(this.getTime()+60*t*1e3),this},e.default={components:{"vis-1":f.a,correlation:l.a,"vis-2":h.a,"vis-3":m.a,"twitter-tooltip":w.a,"animate-number":v.a},data:function(){return{allTweets:[],followers_count:0,retweet_count:0,reply_count:0,favorite_count:0,sentiment_min:0,verified:!1,timePeriod:"minute",fixedStart:"2020-03-25T05:36:44.000Z",startPeriod:0,endPeriod:30,grid:!0,tooltipVisible:!1,selectedTweet:"6",aggregateTweets:[],aggregateCandles:[],sentimentList:[{key:"avgSentiment",title:"Average Sentiment"},{key:"followerSentiment",title:"Follower Weighted Sentiment"},{key:"retweetSentiment",title:"Retweet Weighted Sentiment"},{key:"likeSentiment",title:"Like Weighted Sentiment"}],fixedHeight:!1,curve:!0,offset:0}},created:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.debounceGetData=_.a.debounce(t.updateData,200),t.updateData(),n=t,d.a.get("api/tweets/",{params:{startDate:t.startDate}}).then((function(t){t.data.sort((function(a,b){return new Date(a.timestamp)-new Date(b.timestamp)})).forEach((function(element){n.allTweets.push(T(element.content))}))})).catch((function(t){console.log(t)}));case 4:case"end":return e.stop()}}),e)})))()},watch:{followers_count:function(){return this.debounceGetData()},retweet_count:function(){return this.debounceGetData()},favorite_count:function(){return this.debounceGetData()},sentiment_min:function(){return this.debounceGetData()},verified:function(){return this.debounceGetData()},timePeriod:function(){return this.debounceGetData()},startDate:function(){return this.debounceGetData()},endDate:function(){return this.debounceGetData()}},computed:{tweets:function(){var t=this;return this.allTweets.filter((function(e){return e.created_at>=t.startDate&&e.created_at<=t.endDate}))},width:function(){return this.svgWidth-this.margin.left-this.margin.right},height:function(){return this.svgHeight-this.margin.top-this.margin.bottom},startDate:function(){return"minute"==this.timePeriod?new Date(this.fixedStart).addMinutes(this.startPeriod):new Date(this.fixedStart).addHours(this.startPeriod)},endDate:function(){return"minute"==this.timePeriod?new Date(this.fixedStart).addMinutes(this.startPeriod+this.endPeriod):new Date(this.fixedStart).addHours(this.startPeriod+this.endPeriod)},filteredTweets:function(){var t=this;return this.allTweets.filter((function(e){return e.user.followers_count>=t.followers_count&&Math.abs(e.sentiment)>=t.sentiment_min&&e.retweet_count>=t.retweet_count&&e.reply_count>=t.reply_count&&e.favorite_count>=t.favorite_count&&(!t.verified||t.verified==e.user.verified)}))},filteredTweetCount:function(){return o.sum(this.aggregateTweets,(function(t){return t.Count}))}},methods:{filterTime:function(t){return"minute"==this.timePeriod?(t.setSeconds(0),t.setMilliseconds(0)):(t.setMinutes(0),t.setSeconds(0),t.setMilliseconds(0)),t},processMouseover:function(t){1==t.visible?(this.tooltipVisible=!0,this.selectedTweet=t.id):this.tooltipVisible=!1;o.select("#tooltip").style("left",event.clientX+"px").style("top",event.clientY+"px")},updateData:function(){console.log("getting data");var t=this;d.a.get("api",{params:{startDate:this.startDate,endDate:this.endDate,retweet_count:this.retweet_count,favorite_count:this.favorite_count,followers_count:this.followers_count,verified:this.verified,sentiment:this.sentiment_min,period:this.timePeriod}}).then((function(e){var n=e.data.tweets.sort((function(a,b){return new Date(a.date)-new Date(b.date)})),r=e.data.candles.sort((function(a,b){return new Date(a.date)-new Date(b.date)}));n.forEach((function(element){console.log(element.retweetSentiment)})),t.aggregateTweets=n,t.aggregateCandles=r})).catch((function(t){console.log(t)}))}},directives:{axis:function(t,e){var n=e.arg,r={x:"axisBottom",y:"axisLeft"}[n],c=e.value[n],d=o.transition().duration(500).ease(o.easeLinear);o.select(t).transition(d).call(o[r](c))}}}}}]);